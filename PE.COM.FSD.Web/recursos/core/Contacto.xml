<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="EntidadMap" xmlns="http://ibatis.apache.org/mapping" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >
  <alias>
    <typeAlias alias="Contacto" type="PE.COM.FSD.Entity.Core.Contacto,PE.COM.FSD.Entity" />
  </alias>
  <resultMaps>
    <resultMap id="rm_contacto" class="Contacto">
      <result property="Id"               column="id"></result>
      <result property="IdEntidad"        column="id_entidad"></result>
      <result property="IdCargo"          column="id_cargo"></result>
      <result property="Nombres"          column="c_nombres_contacto"></result>
      <result property="Apellidos"        column="c_apellidos_contacto"></result>
      <result property="DNI"              column="c_dni"></result>
      <result property="Celular"          column="c_nro_celular"></result>
      <result property="TelefonoFijo"     column="c_nro_telefono"></result>
      <result property="Estado"           column="n_estado"></result>
      <result property="UsuarioCreacion"     column="c_usuario_creacion"></result>
      <result property="FecCreacion"         column="d_fecha_creacion"></result>
      <result property="UsuarioModificacion" column="c_usuario_modificacion"></result>
      <result property="FecModificacion"     column="d_fecha_modificacion"></result>
    </resultMap>
  </resultMaps>

  <statements>
    <select id="select_contacto" resultMap="rm_contacto" >
      SELECT * , p.c_nombre
      FROM DBO.contactos c
      inner join parametros_valor p on c.id_cargo = p.id
      where c.n_estado = 1
    </select>

    <select id="select_contacto_id" resultMap="rm_contacto" >
      SELECT * , p.c_nombre
      FROM DBO.contactos c
      inner join parametros_valor p on c.id_cargo = p.id_parametros
      where c.n_estado = 1
      and c.id =  #Id#
    </select>

    <update id="update_contacto">
      update dbo.contactos set
      id_cargo = #IdCargo#,
      c_nombres_contacto = #Nombres#,
      c_apellidos_contacto = #Apellidos#,
      c_dni = #DNI#,
      c_nro_celular = #Celular#,
      c_nro_telefono = #TelefonoFijo#
      where id = #Id#
    </update>

    <insert id="insert_contacto">
      insert into dbo.contactos(id_entidad, id_cargo, c_nombres_contacto, c_apellidos_contacto, c_dni, c_nro_celular, c_nro_telefono, n_estado, c_usuario_creacion, d_fecha_creacion)
      values(#IdEntidad#,#IdCargo#,#Nombres#,#Apellidos#,#DNI#,#Celular#,#TelefonoFijo#,#Estado#,#UsuarioCreacion#,#FecCreacion#)
    </insert>

  </statements>
</sqlMap>